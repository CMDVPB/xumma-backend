# Generated by Django 5.2.9 on 2025-12-13 05:48

import abb.utils
import django.contrib.postgres.fields
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('abb', '0003_modetype_uf_alter_statustype_uf'),
        ('app', '0007_warehouse'),
        ('att', '0005_term'),
        ('axx', '0002_load_load_stages'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Ctr',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uf', models.CharField(db_index=True, default=abb.utils.hex_uuid, max_length=36, unique=True)),
                ('cn', models.CharField(blank=True, max_length=12, null=True)),
                ('date_order', models.DateTimeField(blank=True, null=True)),
                ('date_created', models.DateTimeField(auto_now_add=True)),
                ('date_modified', models.DateTimeField(auto_now=True)),
                ('rate', models.CharField(blank=True, max_length=20, null=True)),
                ('load_size', models.CharField(blank=True, choices=[('ltl', 'LTL'), ('ftl', 'FTL'), ('xpr', 'XPR')], max_length=20, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('customer_ref', models.CharField(blank=True, max_length=100, null=True)),
                ('customer_notes', models.CharField(blank=True, max_length=200, null=True)),
                ('doc_lang', models.CharField(blank=True, choices=[('ro', 'Romanian'), ('en', 'English'), ('ru', 'Russian'), ('rr', 'Romanian/Russian')], default='en', max_length=2, null=True)),
                ('load_add_ons', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(blank=True, max_length=20, null=True), blank=True, null=True, size=3)),
                ('assigned_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_user_ctrs', to=settings.AUTH_USER_MODEL)),
                ('bill_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='contact_ctrs', to='att.contact')),
                ('bt', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bt_ctrs', to='abb.bodytype')),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='company_ctrs', to='app.company')),
                ('contract_terms', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contract_terms_ctrs', to='att.term')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='currency_ctrs', to='abb.currency')),
                ('incoterm', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='itype_ctrs', to='abb.incoterm')),
                ('load', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='load_ctrs', to='axx.load')),
                ('mode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mtype_ctrs', to='abb.modetype')),
                ('payment_term', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payment_term_ctrs', to='att.paymentterm')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='person_ctrs', to='att.person')),
                ('status', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='status_ctrs', to='abb.statustype')),
            ],
            options={
                'verbose_name': 'Ctr',
                'verbose_name_plural': 'Ctrs',
            },
        ),
        migrations.CreateModel(
            name='Series',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uf', models.CharField(db_index=True, default=abb.utils.hex_uuid, max_length=36)),
                ('date_created', models.DateTimeField(auto_now_add=True)),
                ('date_modified', models.DateTimeField(auto_now=True)),
                ('prefix', models.CharField(max_length=10)),
                ('description', models.CharField(blank=True, max_length=100, null=True)),
                ('start_number', models.PositiveIntegerField(default=1)),
                ('document_type', models.CharField(choices=[('load', 'Load'), ('trip', 'Trip'), ('tor', 'Order to carrier'), ('ctr', 'Customer Order'), ('quote', 'Quote'), ('inv', 'Invoice'), ('pf', 'Proforma Invoice'), ('exp', 'Expense')], max_length=20)),
                ('is_default', models.BooleanField(default=False)),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='company_series', to='app.company')),
                ('user', models.ManyToManyField(to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Series',
                'verbose_name_plural': 'Series',
            },
        ),
        migrations.CreateModel(
            name='Inv',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uf', models.CharField(db_index=True, default=abb.utils.hex_uuid, max_length=36, unique=True)),
                ('qn', models.CharField(blank=True, max_length=12, null=True)),
                ('vn', models.CharField(blank=True, max_length=12, null=True)),
                ('date_created', models.DateTimeField(auto_now_add=True)),
                ('date_modified', models.DateTimeField(auto_now=True)),
                ('date_inv', models.DateTimeField(blank=True, null=True)),
                ('date_due', models.DateTimeField(blank=True, null=True)),
                ('an', models.CharField(blank=True, max_length=12, null=True)),
                ('date_act', models.DateTimeField(blank=True, null=True)),
                ('load_detail', models.CharField(blank=True, max_length=300, null=True)),
                ('load_address', models.CharField(blank=True, max_length=100, null=True)),
                ('unload_address', models.CharField(blank=True, max_length=100, null=True)),
                ('date_load', models.DateTimeField(blank=True, null=True)),
                ('date_unload', models.DateTimeField(blank=True, null=True)),
                ('load_size', models.CharField(blank=True, choices=[('ltl', 'LTL'), ('ftl', 'FTL'), ('xpr', 'XPR')], max_length=20, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('load_add_ons', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(blank=True, max_length=20, null=True), blank=True, null=True, size=3)),
                ('doc_lang', models.CharField(blank=True, choices=[('ro', 'Romanian'), ('en', 'English'), ('ru', 'Russian'), ('rr', 'Romanian/Russian')], default='en', max_length=2, null=True)),
                ('customer_ref', models.CharField(blank=True, max_length=100, null=True)),
                ('customer_notes', models.CharField(blank=True, max_length=200, null=True)),
                ('note_act', models.CharField(blank=True, max_length=1000, null=True)),
                ('is_quote', models.BooleanField(blank=True, default=False, null=True)),
                ('exported', models.BooleanField(default=False)),
                ('exported_at', models.DateTimeField(blank=True, null=True)),
                ('internal_use_only', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(blank=True, max_length=1000, null=True), blank=True, null=True, size=10)),
                ('assigned_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_user_invs', to=settings.AUTH_USER_MODEL)),
                ('bill_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='bill_to_invs', to='att.contact')),
                ('bt', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bt_invs', to='abb.bodytype')),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='company_invs', to='app.company')),
                ('contract_terms', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contract_terms_invs', to='att.term')),
                ('currency', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='currency_invs', to='abb.currency')),
                ('incoterm', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incoterm_invs', to='abb.incoterm')),
                ('load', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='load_invs', to='axx.load')),
                ('mode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mode_inv', to='abb.modetype')),
                ('payment_term', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payment_term_invs', to='att.paymentterm')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='person_invs', to='att.person')),
                ('status', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='status_invs', to='abb.statustype')),
                ('series', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='axx.series')),
            ],
            options={
                'verbose_name': 'Inv',
                'verbose_name_plural': 'Invs',
            },
        ),
        migrations.CreateModel(
            name='Tor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uf', models.CharField(db_index=True, default=abb.utils.hex_uuid, max_length=36, unique=True)),
                ('tn', models.CharField(blank=True, max_length=12, null=True)),
                ('doc_number', models.CharField(blank=True, max_length=50, null=True)),
                ('date_created', models.DateTimeField(auto_now_add=True)),
                ('date_modified', models.DateTimeField(auto_now=True)),
                ('date_order', models.DateTimeField(blank=True, null=True)),
                ('tor_details', models.CharField(blank=True, max_length=300, null=True)),
                ('rate', models.CharField(blank=True, max_length=20, null=True)),
                ('is_tor', models.BooleanField(blank=True, default=True, null=True)),
                ('load_size', models.CharField(blank=True, choices=[('ltl', 'LTL'), ('ftl', 'FTL'), ('xpr', 'XPR')], max_length=20, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('load_add_ons', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(blank=True, max_length=20, null=True), blank=True, null=True, size=3)),
                ('doc_lang', models.CharField(blank=True, choices=[('ro', 'Romanian'), ('en', 'English'), ('ru', 'Russian'), ('rr', 'Romanian/Russian')], default='en', max_length=2, null=True)),
                ('assigned_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_user_tors', to=settings.AUTH_USER_MODEL)),
                ('bt', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bt_tors', to='abb.bodytype')),
                ('carrier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='carrier_tors', to='att.contact')),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='company_tors', to='app.company')),
                ('contract_terms', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='contract_terms_tors', to='att.term')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='currency_tors', to='abb.currency')),
                ('driver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='driver_tors', to='att.person')),
                ('incoterm', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incoterm_tors', to='abb.incoterm')),
                ('load', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='load_tors', to='axx.load')),
                ('mode', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mode_tors', to='abb.modetype')),
                ('payment_term', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payment_term_tors', to='att.paymentterm')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='person_tors', to='att.person')),
                ('status', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='status_tors', to='abb.statustype')),
                ('vehicle_tractor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='vehicle_tractor_tors', to='att.vehicleunit')),
                ('vehicle_trailer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='vehicle_trailer_tors', to='att.vehicleunit')),
            ],
            options={
                'verbose_name': 'Tor',
                'verbose_name_plural': 'Tors',
            },
        ),
        migrations.CreateModel(
            name='Exp',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uf', models.CharField(db_index=True, default=abb.utils.hex_uuid, max_length=36, unique=True)),
                ('xn', models.CharField(blank=True, max_length=12, null=True)),
                ('date_created', models.DateTimeField(auto_now_add=True)),
                ('date_modified', models.DateTimeField(auto_now=True)),
                ('date_record', models.DateTimeField(blank=True, null=True)),
                ('doc_number', models.CharField(blank=True, max_length=30, null=True)),
                ('date_issue', models.DateTimeField(blank=True, null=True)),
                ('date_due', models.DateTimeField(blank=True, null=True)),
                ('is_locked', models.BooleanField(default=False)),
                ('doc_lang', models.CharField(blank=True, choices=[('ro', 'Romanian'), ('en', 'English'), ('ru', 'Russian'), ('rr', 'Romanian/Russian')], default='en', max_length=2, null=True)),
                ('comment', models.CharField(blank=True, max_length=300, null=True)),
                ('assigned_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_user_exps', to=settings.AUTH_USER_MODEL)),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='company_exps', to='app.company')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='currency_exps', to='abb.currency')),
                ('load', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='load_exps', to='axx.load')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='person_exps', to='att.person')),
                ('status', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='status_exps', to='abb.statustype')),
                ('supplier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.RESTRICT, related_name='supplier_exps', to='att.contact')),
                ('tor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tor_exps', to='axx.tor')),
            ],
            options={
                'verbose_name': 'Exp',
                'verbose_name_plural': 'Exps',
            },
        ),
        migrations.AddConstraint(
            model_name='series',
            constraint=models.UniqueConstraint(fields=('company', 'prefix', 'document_type'), name='unique_constraint company-prefix-document_type'),
        ),
    ]
